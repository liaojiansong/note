

## 操作系统的运行机制和体系结构

### 运行机制

#### 两种指令

1. 特权指令(只能在核心态下执行,权限极高,可以中断进程,清除内存)
2. 非特权指令

#### 两种处理器状态

1.  核心态
2.  用户态

#### 两种程序

1. 核心程序(内核程序只能在核心态下进行)
2. 用户程序

### 操作系统内核

#### 时钟管理

#### 中断处理

引入中断机制是为了能让程序并发执行. 发生中断意味着操作系统的介入,开展管理工作.

1.  当中断发生后,CPU会立即进入核心态
2.  中断发生后,当前进程暂停运行,由操作系统内核对中断进行处理
3.  因为进程切换,操作I/O设备需要使用到特权指令,必须将CPU从用户态转换到核心态才能执行这些特权指令
4.  所以中断可以使得CPU从用户态转化为核心态,让操作系统拿到使用特权指令的权限,进而开展工作

中断是`用户态->核心态`的唯一途径,`核心态->用户态`可以由特权指令完成

外中断的具体处理过程:

1. 每条指令结束后,CPU检测是否有外部中断信号
2. 若有,中断进程并保存进程的运行环境
3. 根据相应的中断信号类型进入相应的处理程序
4. 恢复原来进程的运行环境,退出中断,继续执行进程

#### 原语

一种特殊的程序,执行具有原子性

### 操作系统体系结构

操作系统分为两大体系结构,大内核,微内核

#### 大内核

性能高,代码多,包含了设备管理等诸多功能

#### 微内核

功能少,结构清晰,只包含最为重要的管理程序.不过需要频繁的在用户态和核心态中间切换,性能低一些

# 内存管理

### DMA()

直接内存访问控制器

# 进程和线程

* 线程必须要依附于进程中
* 进程是操作系统资源分配的基本单位
* 线程是操作系统调度的基本单位
* linux的调度器是不区分进程和线程的
* 多个线程共享进程的内存,线程基于内存共享信息